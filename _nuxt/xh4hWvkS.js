import{_ as z}from"./S-oeU3K-.js";import{_ as x}from"./DeENtvZi.js";import{f as V,g as j,q as C,h as y,B as q,i as N,r as R,o as a,c as n,b as d,a as t,j as k,v as S,F as m,k as _,t as u,w as B,d as A,l as p}from"./CIIwfncC.js";import"./DlAUqK2U.js";import"./FOedhIC0.js";const D={class:"section"},F={class:"container"},M={class:"container"},O={class:"card-header",style:{"background-color":"#f5f5f5"}},P={class:"card-header-title"},$={class:"card-header-title"},E={class:""},L={key:0,class:"content"},T=["onClick"],U={key:1,class:"content"},G={key:0},X=V({__name:"emails",setup(H){const f=j(),w=C(),i=y(["chromium"]);f.query.repositories&&(i.value=f.query.repositories.split(","));const h=y([]),v=async()=>{w.push({query:{repositories:i.value.join(",")}});const g=await Promise.all(i.value.map(o=>fetch(`/data/${o}/organizations_emails.json`))),l=await Promise.all(g.map(o=>o.json())),r={};for(const o of l)for(const e in o){r[e]||(r[e]=new Set);for(const s of o[e])r[e].add(s)}const c=[];for(const[o,e]of Object.entries(r)){const s=Array.from(e).sort();c.push({org:o,emails:s,emails_short:Array.from(s).slice(0,5),emails_size:s.length,username_size:new Set(s.map(b=>b.split("@")[0])).size,collapsed:s.length>6})}c.sort((o,e)=>e.emails.length-o.emails.length),h.value=c};return q(()=>{v()}),N(i,()=>{v()}),(g,l)=>{const r=z,c=x,o=R("b-tooltip");return a(),n("div",null,[d(r),t("section",D,[t("div",F,[l[1]||(l[1]=t("h1",{class:"title"},"Organization's Developers emails",-1)),l[2]||(l[2]=t("p",null,[t("strong",null,"Repositories?")],-1)),d(c,{modelValue:k(i),"onUpdate:modelValue":l[0]||(l[0]=e=>S(i)?i.value=e:null),size:"medium",allowMultiple:!0,allowAll:!0},null,8,["modelValue"])])]),t("section",M,[(a(!0),n(m,null,_(k(h),e=>(a(),n("div",{class:"card box",key:e.organization},[t("div",O,[t("div",P,u(e.org),1),t("div",$,[d(o,{label:e.username_size+" unique usernames",position:"is-bottom",type:"is-light"},{default:B(()=>[t("div",null,u(e.emails.length)+" emails",1)]),_:2},1032,["label"])])]),t("div",E,[e.collapsed?(a(),n("div",L,[t("ul",null,[(a(!0),n(m,null,_(e.emails_short,s=>(a(),n("li",{key:s},u(s),1))),128)),t("li",null,[l[3]||(l[3]=A("... ")),t("a",{onClick:s=>e.collapsed=!1},"Show all",8,T)])])])):p("",!0),e.collapsed?p("",!0):(a(),n("div",U,[e.collapsed?p("",!0):(a(),n("ul",G,[(a(!0),n(m,null,_(e.emails,s=>(a(),n("li",{key:s},u(s),1))),128))]))]))])]))),128))])])}}});export{X as default};
