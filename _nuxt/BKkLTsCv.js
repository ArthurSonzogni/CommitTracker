import{_ as W}from"./K_zvSPJA.js";import{_ as O}from"./CH0ThVOt.js";import{_ as G}from"./bkJIMGU7.js";import{f as F,S as L,s as T,i as x,r as M,o as R,c as I,a as n,b as l,j as t,h as A,w as h,v as D,d as U,g as J,q as K,A as Q,p as X,l as Z}from"./BJdbIX9c.js";import{a as ee,_ as te,b as oe}from"./Cc8W8S1i.js";import{f as z}from"./D2nGpDRe.js";import{_ as se}from"./D9tz11q0.js";import{_ as le}from"./DlAUqK2U.js";import"./FOedhIC0.js";import"./DkrfxnvH.js";import"./yHBgcFlJ.js";import"./DkkWKaWJ.js";import"./BJcRDRUM.js";import"./E4HCz5LM.js";import"./C5X8qJ2i.js";import"./C7cJQd6b.js";import"./DKbKBQE1.js";import"./rlX7cRMw.js";import"./Drloq0xg.js";import"./DISM4ima.js";import"./DDtb2nVR.js";const ae={align:"center"},ne=F({__name:"TimelineCountBasic",props:{repositories:{type:Array[String],default:()=>["chromium"]},developers:{type:Array},dates:{type:Array[Date]}},setup(S){const{$chromiumDataAll:b}=L(),d=S,m=T([]),u=T([]),s=[{field:"developer",label:"Developer"},{field:"author",label:"Author"},{field:"review",label:"Review"}],v=async()=>{const i=[];for(const y of m.value){let p=y.commits.filter(e=>{const k=new Date(e.date);return k>=d.dates[0]&&k<=d.dates[1]});const a={developer:y.developer,author:p.filter(e=>e.kind=="author").length,review:p.filter(e=>e.kind=="review").length};i.push(a)}u.value=i},c=async()=>{const i=await b(d.repositories[0],d.developers);m.value=i.map(y=>({developer:y.developer,commits:y.data})),v()};return c(),x(()=>d.repositories,c),x(()=>d.developers,c),x(()=>d.dates,c),(i,y)=>{const p=M("b-table");return R(),I("div",null,[n("div",ae,[l(p,{data:t(u),columns:s,height:"100%",striped:""},null,8,["data"])])])}}}),ie={align:"center"},re=F({__name:"TimelineCount",props:{repositories:{type:Array[String],default:()=>["chromium"]},developers:{type:Array},dates:{type:Array[Date]},author:{type:Boolean},review:{type:Boolean}},setup(S){const{$chromiumDataAll:b}=L(),d=S,m=T([]),u=T([]),s=T([]),v=A(!1),c=async()=>{const y=[];for(const p of m.value){let a=p.commits.filter(o=>{const f=new Date(o.date);return f>=d.dates[0]&&f<=d.dates[1]});d.author||(a=a.filter(o=>o.kind!="author")),d.review||(a=a.filter(o=>o.kind!="review"));const e=[];e.push({field:"developer",label:"Developer",sortable:!0,sticky:!0,visible:!0,numeric:!1,headerClass:"table-style-header"}),e.push({field:"commit",label:"Σ(Commits)",sortable:!0,visible:!0,numeric:!0,cellClass:"table-style-commits",headerClass:"table-style-header"});const k=[];k.push(["",o=>`Σ(${o})`]),v.value&&(k.push(["_mean",o=>`Mean(${o})`]),k.push(["_median",o=>`Median(${o})`]),k.push(["_min",o=>`Min(${o})`]),k.push(["_max",o=>`Max(${o})`]));for(const o of["Additions","Deletions","Net","Modified","Files"])for(const f of k){const j=`${o.toLowerCase()}${f[0]}`;e.push({field:j,label:f[1](o),sortable:!0,visible:!0,numeric:!0,cellClass:`table-style-${o.toLowerCase()}`,headerClass:"table-style-header"})}s.value=e;const g=a.map(o=>o.additions).sort((o,f)=>o-f),$=a.map(o=>o.deletions).sort((o,f)=>o-f),w=a.map(o=>o.additions-o.deletions).sort((o,f)=>o-f),V=a.map(o=>o.additions+o.deletions).sort((o,f)=>o-f),q=a.map(o=>o.files).sort((o,f)=>o-f),r=z(",d"),C=z(".2f"),B=o=>o.reduce((f,j)=>f+j,0),E=B(g),P=B($),H=B(w),N=B(V),_=B(q),Y={developer:p.developer,commit:z(",")(a.length),additions:r(E),additions_mean:C(E/a.length),additions_median:r(g[Math.floor(g.length/2)]),additions_min:r(g[0]),additions_max:r(g[g.length-1]),deletions:r(P),deletions_mean:C(P/a.length),deletions_median:r($[Math.floor($.length/2)]),deletions_min:r($[0]),deletions_max:r($[$.length-1]),net:r(H),net_mean:C(H/a.length),net_median:r(w[Math.floor(w.length/2)]),net_min:r(w[0]),net_max:r(w[w.length-1]),modified:r(N),modified_mean:C(N/a.length),modified_median:r(V[Math.floor(V.length/2)]),modified_min:r(V[0]),modified_max:r(V[V.length-1]),files:r(_),files_mean:C(_/a.length),files_median:r(q[Math.floor(q.length/2)]),files_min:r(q[0]),files_max:r(q[q.length-1])};y.push(Y)}u.value=y},i=async()=>{const y=await b(d.repositories[0],d.developers);m.value=y.map(p=>({developer:p.developer,commits:p.data})),c()};return i(),x(()=>d.repositories,i),x(()=>d.developers,i),x(()=>d.dates,i),x(()=>d.author,c),x(()=>d.review,c),x(v,c),(y,p)=>{const a=M("b-switch"),e=M("b-field"),k=M("b-table");return R(),I("div",null,[l(e,null,{default:h(()=>[l(a,{modelValue:t(v),"onUpdate:modelValue":p[0]||(p[0]=g=>D(v)?v.value=g:null)},{default:h(()=>p[1]||(p[1]=[U("Full")])),_:1},8,["modelValue"])]),_:1}),n("div",ie,[l(k,{data:t(u),columns:t(s),"sticky-header":"",striped:"",hoverable:""},null,8,["data","columns"])])])}}}),de={class:"section sticky top"},ue={class:"section"},me={class:"container"},ce={class:"section"},pe={class:"container"},_e={style:{height:"calc(50vh)"}},ve={class:"section"},fe={class:"container"},he={class:"section"},be={class:"container"},we={class:"section"},ye={class:"container"},ke={class:"section"},ge={class:"container"},Ve={class:"section sticky bottom"},xe=F({__name:"individuals",setup(S){const b=J(),d=K(),m=A([new Date("2000-01-01"),new Date]);b.query.dates&&(m.value=b.query.dates.split(",").map(a=>new Date(a)));const u=A([]);b.query.developers&&(u.value=b.query.developers.split(",")),Q(()=>u.value);const s=A(["author","review"]);b.query.options&&(s.value=b.query.options.split(","));const v=A(0);b.query.hourlyParam&&(v.value=parseInt(b.query.hourlyParam),v.value=Math.min(2,Math.max(0,v.value)));const c=A(100);b.query.wrappedBuckets&&(c.value=parseInt(b.query.wrappedBuckets));const i=A(["chromium"]);b.query.repositories&&(i.value=b.query.repositories.split(",")),x([m,u,s,v,c,i],()=>{d.push({query:{developers:u.value.join(","),options:s.value.join(","),hourlyParam:v.value,wrappedBuckets:c.value,repositories:i.value.join(","),dates:m.value.map(a=>a.toISOString().split("T")[0]).join(",")}})});const p=()=>{const a=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);document.documentElement.dataset.scrolltop=window.scrollY>100?"1":"0",document.documentElement.dataset.scrollbottom=a-window.scrollY>1e3?"1":"0"};return p(),document.addEventListener("scroll",p,{passive:!0}),(a,e)=>{const k=W,g=O,$=G,w=M("b-field"),V=M("b-checkbox-button"),q=ne,r=ee,C=M("b-slider-tick"),B=M("b-slider"),E=te,P=oe,H=re,N=se;return R(),I("div",null,[l(k),n("div",null,[n("section",de,[l(g,{modelValue:t(i),"onUpdate:modelValue":e[0]||(e[0]=_=>D(i)?i.value=_:null),size:"is-small"},null,8,["modelValue"]),l(w,{grouped:""},{default:h(()=>[l(w,{expanded:""},{default:h(()=>[l($,{modelValue:t(u),"onUpdate:modelValue":e[1]||(e[1]=_=>D(u)?u.value=_:null),allowEmail:"",allowUsername:""},null,8,["modelValue"])]),_:1}),l(w,null,{default:h(()=>[l(V,{modelValue:t(s),"onUpdate:modelValue":e[2]||(e[2]=_=>D(s)?s.value=_:null),"native-value":"author",size:"is-medium"},{default:h(()=>e[8]||(e[8]=[U(" Author ")])),_:1},8,["modelValue"]),l(V,{modelValue:t(s),"onUpdate:modelValue":e[3]||(e[3]=_=>D(s)?s.value=_:null),"native-value":"review",size:"is-medium"},{default:h(()=>e[9]||(e[9]=[U(" Review ")])),_:1},8,["modelValue"])]),_:1}),l(w,null,{default:h(()=>[t(u).length>=2?(R(),X(V,{key:0,modelValue:t(s),"onUpdate:modelValue":e[4]||(e[4]=_=>D(s)?s.value=_:null),"native-value":"stacked",size:"is-medium"},{default:h(()=>e[10]||(e[10]=[U(" Stacked ")])),_:1},8,["modelValue"])):Z("",!0)]),_:1})]),_:1})]),n("section",ue,[n("div",me,[e[11]||(e[11]=n("h2",{class:"title"},"0. Counts",-1)),l(q,{repositories:t(i),developers:t(u),dates:t(m),author:t(s).includes("author"),review:t(s).includes("review")},null,8,["repositories","developers","dates","author","review"])])]),n("section",ce,[n("div",pe,[e[12]||(e[12]=n("h2",{class:"title"},"1. Timeline",-1)),n("div",_e,[l(r,{chart:"line",repositories:t(i),developers:t(u),dates:t(m),author:t(s).includes("author"),review:t(s).includes("review"),stacked:t(s).includes("stacked")},null,8,["repositories","developers","dates","author","review","stacked"])])])]),n("section",ve,[n("div",fe,[e[16]||(e[16]=n("h2",{class:"title"},"2. Timeline wrapped",-1)),l(w,{grouped:""},{default:h(()=>[l(w,{label:"Modulo",expanded:"","label-position":"on-border"},{default:h(()=>[l(B,{modelValue:t(v),"onUpdate:modelValue":e[5]||(e[5]=_=>D(v)?v.value=_:null),min:0,max:2,"aria-label":"Fan",tooltip:!1,rounded:""},{default:h(()=>[l(C,{value:0},{default:h(()=>e[13]||(e[13]=[U("Day")])),_:1}),l(C,{value:1},{default:h(()=>e[14]||(e[14]=[U("Week")])),_:1}),l(C,{value:2},{default:h(()=>e[15]||(e[15]=[U("Year")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(w,{label:"Buckets: "+t(c),expanded:"","label-position":"on-border"},{default:h(()=>[l(B,{modelValue:t(c),"onUpdate:modelValue":e[6]||(e[6]=_=>D(c)?c.value=_:null),min:1,max:500,"aria-label":"Buckets",lazy:"",rounded:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(E,{repositories:t(i),developers:t(u),dates:t(m),author:t(s).includes("author"),review:t(s).includes("review"),stacked:t(s).includes("stacked"),hourlyParam:t(v),buckets:t(c)},null,8,["repositories","developers","dates","author","review","stacked","hourlyParam","buckets"])])]),n("section",he,[n("div",be,[e[17]||(e[17]=n("h2",{class:"title"},"3. Peers",-1)),l(P,{repositories:t(i),developers:t(u),dates:t(m),author:t(s).includes("author"),review:t(s).includes("review"),stacked:t(s).includes("stacked")},null,8,["repositories","developers","dates","author","review","stacked"])])]),n("section",we,[n("div",ye,[e[18]||(e[18]=n("h2",{class:"title"},"4. Details",-1)),l(H,{repositories:t(i),developers:t(u),dates:t(m),author:t(s).includes("author"),review:t(s).includes("review")},null,8,["repositories","developers","dates","author","review"])])]),n("section",ke,[n("div",ge,[e[19]||(e[19]=n("h2",{class:"title"},"5. Heatmap",-1)),l(r,{chart:"heatmap",repositories:t(i),developers:t(u),dates:t(m),author:t(s).includes("author"),review:t(s).includes("review"),stacked:t(s).includes("stacked")},null,8,["repositories","developers","dates","author","review","stacked"])])]),n("section",Ve,[l(w,{expanded:""},{default:h(()=>[l(N,{modelValue:t(m),"onUpdate:modelValue":e[7]||(e[7]=_=>D(m)?m.value=_:null)},null,8,["modelValue"])]),_:1})])])])}}}),We=le(xe,[["__scopeId","data-v-c8394a19"]]);export{We as default};
