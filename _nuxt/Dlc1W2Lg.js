import{_ as M}from"./K_zvSPJA.js";import{_ as B}from"./CH0ThVOt.js";import{s as N}from"./DkrfxnvH.js";import{f as C,g as L,q as S,h as m,i as D,D as P,o as T,c as U,b as R,a as o,j as f,v as $,d as V,t as k}from"./BJdbIX9c.js";import{b as E}from"./BxPoHLz2.js";import{i as O}from"./C5X8qJ2i.js";import"./DlAUqK2U.js";import"./FOedhIC0.js";import"./yHBgcFlJ.js";import"./C7cJQd6b.js";const z={class:"section"},F={class:"container"},se=C({__name:"usernames",setup(G){const g=L(),q=S(),r=m(["chromium"]);g.query.repositories&&(r.value=g.query.repositories.split(","));const h=m(0),a=m([]),_=m(null),x=async()=>{var b,j;q.push({query:{repositories:r.value.join(",")}});const y=await Promise.all(r.value.map(e=>fetch(`/data/${e}/usernames.json`))),s=await Promise.all(y.map(e=>e.json())),u=[...new Set(s.flat())];h.value=u.length,a.value=[];for(const e of u){const t=e.length;(b=a.value)[t]||(b[t]=0),a.value[t]++}for(let e=0;e<a.value.length;++e)(j=a.value)[e]||(j[e]=0);const v=Math.max(...a.value),p=e=>{e.transition().duration(t=>450).ease(E).style("width",t=>2*(t!=0)+79*t/v+"%")},w=e=>{e.transition().duration(t=>450).textTween((t,n,l)=>{const i=N(l[n]).text(),d=O(i,t);return c=>Math.round(d(c))})};N(_.value).selectAll(".group").data(a.value).join(e=>{const t=e.append("div");t.classed("group",!0);const n=t.append("div");n.classed("line",!0);const l=n.append("div");l.classed("left",!0),l.text((H,A)=>A);const i=n.append("div");i.classed("center",!0),i.style("width",0),p(i);const d=n.append("div");d.classed("right",!0),d.text(0),w(d),i.on("click",function(){this.parentNode.parentNode.lastChild.classList.toggle("hidden")});const c=t.append("ul");return c.classed("usernameList",!0),c.classed("hidden",!0),t},e=>(e.select("ul").classed("hidden",!0),p(e.select(".center")),w(e.select(".right")),e),e=>e.remove()).select("ul").selectAll("li").data((e,t)=>u.filter(n=>n.length===t),e=>e).join(e=>{const t=e.append("li"),n=t.append("a");return n.text(l=>l),n.attr("href",l=>`/individuals?developers=${l}`),t},e=>e,e=>e.remove())};return D(r,x),P(x),(y,s)=>{const u=M,v=B;return T(),U("div",null,[R(u),o("section",z,[o("div",F,[s[2]||(s[2]=o("h1",{class:"title"},"Usernames length distribution",-1)),s[3]||(s[3]=o("strong",null,"Repositories:",-1)),R(v,{modelValue:f(r),"onUpdate:modelValue":s[0]||(s[0]=p=>$(r)?r.value=p:null),size:"medium",allowMultiple:!0,allowAll:!0},null,8,["modelValue"]),o("p",null,[s[1]||(s[1]=V(" Approximatively ")),o("strong",null,k(f(h)),1),V(" developers contributed to "+k(f(r).join(", "))+" repository. ",1)]),s[4]||(s[4]=o("div",{class:"line"},[o("div",{class:"left"},[o("strong",null,"Length")]),o("div",{class:"right"},[o("strong",null,"#")])],-1)),o("div",{ref_key:"histogram",ref:_},null,512)])])])}}});export{se as default};
