import{_ as P}from"./S-oeU3K-.js";import{_ as W}from"./DeENtvZi.js";import{f as G,y as Y,z as H,h as O,B as J,r as q,o as D,c as j,a as y,b as u,w as d,d as c,F as X,k as Z,p as R,j as r,l as N,t as h,v as b,_ as K,s as T,A as ee,i as F,g as oe,q as te}from"./CIIwfncC.js";import{_ as Q}from"./DlAUqK2U.js";import{_ as ne}from"./DfeVyLnx.js";import{_ as le}from"./B4jD6aij.js";import{r as ae}from"./FOedhIC0.js";import{f as E}from"./D2nGpDRe.js";import{_ as se}from"./D3ms4flo.js";import"./Br5iDS7E.js";import"./Dp_3OYB3.js";import"./BeACrgm2.js";import"./BnJ91Bvx.js";import"./DKbKBQE1.js";import"./CNzZi2nf.js";import"./rlX7cRMw.js";import"./Drloq0xg.js";import"./BxPoHLz2.js";import"./BOzyxcAh.js";const L=["ACM","AMD","ANL","ARM","Accenture","Access Digital","Adobe","Akamai","Alibaba","Alif Type","Amazon","Andes","Antmicro","Apple","Arntzen Software","Autodesk","Azul","BDTi","BEC","BlackBerry","Blackberry","Bloomberg","Brave","Broadcom","ByteDance","CERN","Canonical","Chinese Academy of Sciences","Cisco","Cloudflare","Codeplay","Collabora","Colorado school of Mines","Cornell university","Debian","Dell","Digia","Dolby","ENS Lyon","ENS Rennes","Epitech","Ericsson","Foxit","FreeBSD","Front Range Internet","GNU","Gentoo","Getdesigned","Gnome","Google","GraphCore","Harvard","Huawei","Hyperconnect","IBM","Igalia","Imagination","Individuals","Intel","Island","Jetbrains","KDE","Khronos","LGE","LLVM","Ladybird","Linaro","Linux Foundation","Linux Kernel","Logitech","Loongson","LowRISK","LunarG","MIPS","MediaTek","Meta","Metrix Constultants","Microchip","Microsoft","Mobica","Modular","Moritz Systems","Motorola","Mozilla","NEC","NYU","Narod","Naver","Netflix","NextSilicon","Nokia","Northeastern University","Nuanti","Nvidia","Octopus Computing","Opera","Polymage Labs","Purdue University","Qiaxin","Qt","Qualcom","Qualcomm","Qualcoom","RT-RK","Redhat","Rivos","Rutgers","Rwthaachen University","SAP","SAS","SN Systems","Saarland Informatics Campus","Salesforce","Samsung","Shopify","SiFive","Sigma technology","Slack","Sony","St Petersburg State University","Suse","Swansea University","Synopsys","Szeged","Tencent","TensorFlow","Técnico LISBOA","UC Santa Barbara","Uber","Ubisoft","University of Illinois","University of Tenessee","University of Washington","University of Wisconsin","Universität Passau","Unknown","Valve","Vewd","Vivaldi","Wacom","WebKit","Windfall","X","XMOS","Xiaomi","Yandex","Zilliqa"],ie={class:"columns"},re={class:"fields column"},ue={class:"column is-narrow"},de=G({__name:"OrganizationsSelector",props:Y({allowMultiple:{type:Boolean,required:!1,default:!1},allowAll:{type:Boolean,required:!1,default:!1},size:{default:"is-small",type:String,required:!0},label:{default:"",type:String,required:!1},repositories:{type:Array[String],required:!1,default:()=>[]}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(x){const s=x,M=H(x,"modelValue"),V=O(structuredClone(L)),w=O(M.value.length>1&&s.allowMultiple),v=O(M.value.length==V.value.length),S=O(["adobe","amazon","apple","facebook","google","microsoft","netflix","opera","redhat","slack"]),g=async()=>{const m=await(await fetch("/data/organizations_summary.json")).json(),U={};for(const C of V.value){U[C]=0;for(const e of s.repositories)m[e]&&(U[C]+=m[e][C]||0)}V.value.sort((C,e)=>{const A=U[e]-U[C];return A==0?C.localeCompare(e):A})},k=()=>{V.value.sort()},_=()=>{v.value=!v.value,v.value?(w.value=s.allowMultiple,M.value=L):(w.value=!1,M.value=[])},$=z=>{if(!w.value){M.value=[z];return}const m=[...M.value],U=m.indexOf(z);U===-1?m.push(z):m.splice(U,1),M.value=m.sort()};return J(()=>{g()}),(z,m)=>{const U=q("b-icon"),C=q("b-checkbox-button"),e=q("b-checkbox");return D(),j("div",null,[y("div",ie,[y("div",re,[y("button",{class:"sort-button",onClick:k},[u(U,{icon:"sort-alphabetical-descending-variant",size:"is-medium"},{default:d(()=>m[3]||(m[3]=[c(" sort alphabetically")])),_:1})]),y("button",{class:"sort-button",onClick:g},[u(U,{icon:"sort",size:"is-medium"},{default:d(()=>m[4]||(m[4]=[c(" sort by commits")])),_:1})]),(D(!0),j(X,null,Z(r(V),(A,I)=>(D(),R(C,{style:{"margin-right":"-0.02rem","margin-left":"0"},name:"organizations",key:I,size:x.size,modelValue:M.value,"onUpdate:modelValue":m[0]||(m[0]=B=>M.value=B),onInput:B=>$(A),"native-value":A},{default:d(()=>[r(S).includes(A.toLowerCase())?(D(),R(U,{key:0,icon:A.toLowerCase(),size:"is-small"},null,8,["icon"])):N("",!0),c(" "+h(A),1)]),_:2},1032,["size","modelValue","onInput","native-value"]))),128)),m[5]||(m[5]=y("div",{class:"spacer"},null,-1))]),y("div",ue,[y("div",null,[x.allowAll?(D(),R(e,{key:0,size:x.size,name:"all",value:r(v),onInput:m[1]||(m[1]=A=>_()),type:"is-warning"},{default:d(()=>m[6]||(m[6]=[c(" All ")])),_:1},8,["size","value"])):N("",!0)]),y("div",null,[x.allowMultiple?(D(),R(e,{key:0,size:x.size,name:"multiple",modelValue:r(w),"onUpdate:modelValue":m[2]||(m[2]=A=>b(w)?w.value=A:null)},{default:d(()=>m[7]||(m[7]=[c(" Multiple ")])),_:1},8,["size","modelValue"])):N("",!0)]),K(z.$slots,"default",{},void 0,!0)])])])}}}),me=Q(de,[["__scopeId","data-v-abee7135"]]),pe={class:"main"},fe={key:0,style:{"aspect-ratio":"16/9"}},ce={class:"card"},ve={class:"card-content"},ye={class:"content"},be=G({__name:"Organizations",props:{repositories:{type:Array[String],default:()=>["chromium"]},organizations:{type:Array[String],default:()=>["Google"]},colors:{type:String,default:"repositories"},grouping:{type:String,default:"yearly"},kind:{},metric:{},chart:{type:String,default:"bar"},dates:{type:Array[Date],default:()=>[new Date("2000-01-01"),new Date]},others:{type:Boolean,default:!1},display:{type:String,default:"absolute"}},setup(x){const s=x,M=new Map;for(const n of ae)M.set(n.dirname,n.color);const V=new Map;for(const n in L){const o=n*360/L.length+n%4*90,a=40+5*(n%3);V.set(L[n],`hsl(${o}, 99%, ${a}%)`)}V.set("Others","hsl(0, 0%, 50%)");const w=T([]),v=T([]),S=O(!1);let g=E(",d");const k=function(n,o){for(const a in o)n[a]=(n[a]||0)+o[a]},_=function(n){switch(s.grouping){case"forever":return s.dates[0];case"decennial":return new Date(n.substr(0,3)+"0-01-01");case"yearly":return new Date(n.substr(0,4)+"-01-01");case"quarterly":return new Date(n.substr(0,4)+"-"+(1+(parseInt(n.substr(5,1))-1)*3)+"-01");case"monthly":return new Date(n+"-01")}},$=async function(n){const a=await(await fetch(`/data/${n}/organizations_summary_${s.metric}_${s.grouping}_${s.kind}.json`)).json(),i={};i.Others={};for(const t in a){if(s.organizations.includes(t)){i[t]=a[t];continue}(s.colors=="organizations"||s.others)&&k(i.Others,a[t])}for(const t in i)for(const f in i[t]){const p=_(f);(p<s.dates[0]||p>s.dates[1])&&delete i[t][f]}return i},z=async function(){var a,i;const n={};for(const t of s.repositories)n[t]=await $(t);const o={};if(s.colors=="repositories"){for(const t in n)for(const f in n[t])for(const p in n[t][f])o[p]=o[p]||{},(a=o[p])[t]||(a[t]=0),o[p][t]+=n[t][f][p];if(s.display=="percent")for(const t in o){let f=0;for(const p in o[t])f+=o[t][p];for(const p in o[t])o[t][p]/=f}}else{for(const t in n)for(const f in n[t])for(const p in n[t][f])o[p]=o[p]||{},(i=o[p])[f]||(i[f]=0),o[p][f]+=n[t][f][p];if(s.display=="percent")for(const t in o){let f=0;for(const p in o[t])f+=o[t][p];for(const p in o[t])o[t][p]/=f}if(!s.others)for(const t in o)delete o[t].Others}if(s.display=="accumulative"){const t=new Set;for(const p in o)for(const l in o[p])t.add(l);const f={};for(const p of t)f[p]=0;for(const p of Object.keys(o).sort())for(const l of t)f[l]+=o[p][l]||0,o[p][l]=f[l]}for(const t in o)for(const f in o[t])o[t][f]==0&&delete o[t][f];for(const t in o)Object.keys(o[t]).length==0&&delete o[t];return o},m=async function(){const n=await z();if(g=s.display=="percent"?E(".2%"):s.metric=="commit"?o=>E(",d")(o)+" ⚙️":o=>E(",d")(o)+" 🧍",s.chart=="bar"&&(w.value=Object.keys(n).sort().map(o=>({label:o,values:Object.keys(n[o]).sort().map(a=>({label:a,value:n[o][a],color:s.colors=="repositories"?M.get(a):V.get(a)}))}))),s.chart=="line"){const o={};for(const i in n)for(const t in n[i])o[t]=(o[t]||0)+n[i][t];const a=Object.keys(o).sort((i,t)=>o[t]-o[i]).slice(0,10);v.value=a.map(i=>({label:i,values:Object.keys(n).sort().slice(0,-1).map(t=>({x:new Date(_(t)),y:n[t][i]||0}))}))}},U=function(n,o,a){const i=new Blob([n],{type:a||"text/plain"}),t=URL.createObjectURL(i),f=document.createElement("a");f.href=t,f.download=o,f.click(),URL.revokeObjectURL(t)},C=async function(){const n=await z();U(JSON.stringify(n,null,2),"data.json","application/json")},e=async function(){const n=await z(),o={};for(const a in n)for(const i in n[a])o[i]=o[i]||{},o[i][a]=n[a][i];U(JSON.stringify(o,null,2),"data.json","application/json")},A=async function(){const n=await z(),o=Object.keys(n).sort().map(a=>Object.keys(n[a]).sort().map(i=>`${a},${i},${n[a][i]}`).join(`
`)).join(`
`);U(o,"data.csv","text/csv")},I=async function(){const n=await z(),o=new Set;for(const i in n)for(const t in n[i])o.add(t);let a="Date";for(const i of o)a+=`,${i}`;for(const i in n){a+=`
${i}`;for(const t of o)a+=`,${n[i][t]||0}`}U(a,"data.csv","text/csv")},B=ee(()=>{switch(s.grouping){case"forever":return"Forever";case"decennial":return"Decade";case"yearly":return"Year";case"quarterly":return"Quarter";case"monthly":return"Month"}});return F(s,m),J(()=>{m()}),(n,o)=>{const a=ne,i=le,t=q("b-button"),f=q("b-modal"),p=q("b-field");return D(),j("div",pe,[x.chart=="line"?(D(),j("div",fe,[u(a,{class:"line-chart",data:r(v),formatter:r(g)},null,8,["data","formatter"])])):N("",!0),x.chart=="bar"?(D(),R(i,{key:1,timeLabel:r(B),formatter:r(g),data:r(w)},null,8,["timeLabel","formatter","data"])):N("",!0),u(p,{position:"is-centered"},{default:d(()=>[K(n.$slots,"default",{},void 0,!0),o[12]||(o[12]=y("p",{class:"m-2"},null,-1)),u(p,{position:"is-centered"},{default:d(()=>[u(t,{onClick:o[0]||(o[0]=l=>S.value=!0)},{default:d(()=>o[6]||(o[6]=[c(" Download ")])),_:1}),u(f,{modelValue:r(S),"onUpdate:modelValue":o[5]||(o[5]=l=>b(S)?S.value=l:null),width:640},{default:d(()=>[y("div",ce,[y("div",ve,[o[11]||(o[11]=y("div",{class:"media"},[y("div",{class:"media-content"},[y("p",{class:"title is-4"},"Download as:")])],-1)),y("div",ye,[u(t,{type:"is-light",class:"download-button",onClick:o[1]||(o[1]=l=>e())},{default:d(()=>o[7]||(o[7]=[c(" JSON ")])),_:1}),u(t,{type:"is-light",class:"download-button",onClick:o[2]||(o[2]=l=>C())},{default:d(()=>o[8]||(o[8]=[c(" JSON (variant) ")])),_:1}),u(t,{type:"is-light",class:"download-button",onClick:o[3]||(o[3]=l=>A())},{default:d(()=>o[9]||(o[9]=[c(" CSV (rows)")])),_:1}),u(t,{type:"is-light",class:"download-button",onClick:o[4]||(o[4]=l=>I())},{default:d(()=>o[10]||(o[10]=[c(" CSV (table) ")])),_:1})])])])]),_:1},8,["modelValue"])]),_:1})]),_:3})])}}}),ge=Q(be,[["__scopeId","data-v-641f402b"]]),Ve={class:"section"},we={class:"container"},ze={key:0,class:"mt-2"},ke={class:"section"},Ge=G({__name:"commits",setup(x){const s=oe(),M=te(),V=O(["chromium"]);s.query.repositories&&(V.value=s.query.repositories.split(","));const w=O(["ARM","Adobe","Apple","ByteDance","Google","Igalia","Individuals","Intel","LGE","Microsoft","Nokia","Opera","Samsung","Unknown","WebKit","Yandex"]);s.query.organizations&&(s.query.organizations==="all"?w.value=L:w.value=s.query.organizations.split(","));const v=O("yearly");s.query.grouping&&(v.value=s.query.grouping);const S=O("organizations");s.query.colors&&(S.value=s.query.colors);const g=O("author");s.query.kind&&(g.value=s.query.kind);const k=O("commit");s.query.metric&&(k.value=s.query.metric);const _=O("bar");s.query.chart&&(_.value=s.query.chart);const $=O([new Date("2000-01-01"),new Date]);s.query.dates&&($.value=s.query.dates.split(",").map(C=>new Date(C)));const z=O(s.query.others===null),m=O(s.query.percent===null?"percent":s.query.accu===null?"accumulative":"absolute");return F([V,w,v,S,g,k,_,$,z,m],()=>{M.push({query:{repositories:V.value.join(","),organizations:w.value.length===L.length?"all":w.value.join(","),grouping:v.value,colors:S.value,kind:g.value,metric:k.value,chart:_.value,dates:$.value.map(C=>C.toISOString().split("T")[0]).join(","),others:z.value?null:void 0,percent:m.value==="percent"?null:void 0,accu:m.value==="accumulative"?null:void 0}})}),F(k,()=>{k.value==="contributor"&&m.value==="accumulative"&&(m.value="absolute")}),(C,e)=>{const A=P,I=W,B=q("b-checkbox"),n=q("b-tooltip"),o=me,a=q("b-radio-button"),i=q("b-field"),t=ge,f=q("b-notification"),p=se;return D(),j("div",null,[u(A),y("section",Ve,[y("div",we,[e[41]||(e[41]=y("h1",{class:"title"},"Organizations contributions",-1)),e[42]||(e[42]=y("p",null,[y("strong",null,"Repositories?")],-1)),u(I,{modelValue:r(V),"onUpdate:modelValue":e[0]||(e[0]=l=>b(V)?V.value=l:null),size:"small",allowMultiple:!0,allowAll:!0},null,8,["modelValue"]),e[43]||(e[43]=y("p",null,[y("strong",null,"Organizations:")],-1)),u(o,{modelValue:r(w),"onUpdate:modelValue":e[2]||(e[2]=l=>b(w)?w.value=l:null),size:"small",allowMultiple:!0,allowAll:!0,repositories:r(V)},{default:d(()=>[y("div",null,[u(n,{multilined:"",label:`Include all the organizations that are not in the
              list as 'Others'`,position:"is-bottom"},{default:d(()=>[u(B,{size:"small",name:"others",modelValue:r(z),"onUpdate:modelValue":e[1]||(e[1]=l=>b(z)?z.value=l:null)},{default:d(()=>e[21]||(e[21]=[c(" Others ")])),_:1},8,["modelValue"])]),_:1})])]),_:1},8,["modelValue","repositories"]),u(i,{grouped:"","group-multiline":""},{default:d(()=>[u(i,{label:"As:"},{default:d(()=>[u(a,{name:"kind",modelValue:r(g),"onUpdate:modelValue":e[3]||(e[3]=l=>b(g)?g.value=l:null),"native-value":"author"},{default:d(()=>e[22]||(e[22]=[c(" author ")])),_:1},8,["modelValue"]),u(a,{name:"kind",modelValue:r(g),"onUpdate:modelValue":e[4]||(e[4]=l=>b(g)?g.value=l:null),"native-value":"review"},{default:d(()=>e[23]||(e[23]=[c(" reviewer ")])),_:1},8,["modelValue"]),u(a,{name:"kind",modelValue:r(g),"onUpdate:modelValue":e[5]||(e[5]=l=>b(g)?g.value=l:null),"native-value":"both"},{default:d(()=>e[24]||(e[24]=[c(" both ")])),_:1},8,["modelValue"])]),_:1}),u(i,{label:"Grouping:"},{default:d(()=>[u(a,{name:"grouping",modelValue:r(v),"onUpdate:modelValue":e[6]||(e[6]=l=>b(v)?v.value=l:null),"native-value":"forever"},{default:d(()=>e[25]||(e[25]=[c(" Forever ")])),_:1},8,["modelValue"]),u(a,{name:"grouping",modelValue:r(v),"onUpdate:modelValue":e[7]||(e[7]=l=>b(v)?v.value=l:null),"native-value":"decennial"},{default:d(()=>e[26]||(e[26]=[c(" Decennial ")])),_:1},8,["modelValue"]),u(a,{name:"grouping",modelValue:r(v),"onUpdate:modelValue":e[8]||(e[8]=l=>b(v)?v.value=l:null),"native-value":"yearly"},{default:d(()=>e[27]||(e[27]=[c(" Yearly ")])),_:1},8,["modelValue"]),u(a,{name:"grouping",modelValue:r(v),"onUpdate:modelValue":e[9]||(e[9]=l=>b(v)?v.value=l:null),"native-value":"quarterly"},{default:d(()=>e[28]||(e[28]=[c(" Quarterly ")])),_:1},8,["modelValue"]),u(a,{name:"grouping",modelValue:r(v),"onUpdate:modelValue":e[10]||(e[10]=l=>b(v)?v.value=l:null),"native-value":"monthly"},{default:d(()=>e[29]||(e[29]=[c(" Monthly ")])),_:1},8,["modelValue"])]),_:1}),u(i,{label:"Colors:"},{default:d(()=>[u(a,{name:"colors",modelValue:r(S),"onUpdate:modelValue":e[11]||(e[11]=l=>b(S)?S.value=l:null),"native-value":"repositories"},{default:d(()=>e[30]||(e[30]=[c(" Repositories ")])),_:1},8,["modelValue"]),u(a,{name:"colors",modelValue:r(S),"onUpdate:modelValue":e[12]||(e[12]=l=>b(S)?S.value=l:null),"native-value":"organizations"},{default:d(()=>e[31]||(e[31]=[c(" Organizations ")])),_:1},8,["modelValue"])]),_:1}),u(i,{label:"Chart:"},{default:d(()=>[u(a,{name:"chart",modelValue:r(_),"onUpdate:modelValue":e[13]||(e[13]=l=>b(_)?_.value=l:null),"native-value":"line"},{default:d(()=>e[32]||(e[32]=[c(" Line ")])),_:1},8,["modelValue"]),u(a,{name:"chart",modelValue:r(_),"onUpdate:modelValue":e[14]||(e[14]=l=>b(_)?_.value=l:null),"native-value":"bar"},{default:d(()=>e[33]||(e[33]=[c(" Bar ")])),_:1},8,["modelValue"])]),_:1})]),_:1}),u(t,{repositories:r(V),grouping:r(v),colors:r(S),kind:r(g),metric:r(k),organizations:r(w),chart:r(_),dates:r($),others:r(z),display:r(m)},{default:d(()=>[u(i,{class:"has-addons"},{default:d(()=>[u(a,{size:"small",name:"metric",modelValue:r(k),"onUpdate:modelValue":e[15]||(e[15]=l=>b(k)?k.value=l:null),"native-value":"commit"},{default:d(()=>[u(n,{label:"Number of commits"},{default:d(()=>e[34]||(e[34]=[c(" ⚙️ ")])),_:1})]),_:1},8,["modelValue"]),u(a,{size:"small",name:"metric",modelValue:r(k),"onUpdate:modelValue":e[16]||(e[16]=l=>b(k)?k.value=l:null),"native-value":"contributor"},{default:d(()=>[u(n,{label:"Number of contributors"},{default:d(()=>e[35]||(e[35]=[c(" 🧍 ")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e[39]||(e[39]=y("div",{class:"mr-2"},null,-1)),u(i,{class:"has-addons"},{default:d(()=>[u(a,{size:"small",name:"display",modelValue:r(m),"onUpdate:modelValue":e[17]||(e[17]=l=>b(m)?m.value=l:null),"native-value":"accumulative",disabled:r(k)=="contributor"},{default:d(()=>e[36]||(e[36]=[c(" Accumulative ")])),_:1},8,["modelValue","disabled"]),u(a,{size:"small",name:"display",modelValue:r(m),"onUpdate:modelValue":e[18]||(e[18]=l=>b(m)?m.value=l:null),"native-value":"absolute"},{default:d(()=>e[37]||(e[37]=[c(" Absolute ")])),_:1},8,["modelValue"]),u(a,{size:"small",name:"display",modelValue:r(m),"onUpdate:modelValue":e[19]||(e[19]=l=>b(m)?m.value=l:null),"native-value":"percent"},{default:d(()=>e[38]||(e[38]=[c(" percent ")])),_:1},8,["modelValue"])]),_:1})]),_:1},8,["repositories","grouping","colors","kind","metric","organizations","chart","dates","others","display"]),r(k)=="contributor"?(D(),j("div",ze,[r(V).length>1?(D(),R(f,{key:0,type:"is-warning"},{default:d(()=>e[40]||(e[40]=[y("p",null,[y("strong",null,"Note:"),c(" Contributors who have contributed to multiple repositories will be counted once per repository. ")],-1)])),_:1})):N("",!0)])):N("",!0)])]),y("section",ke,[u(i,{expanded:""},{default:d(()=>[u(p,{modelValue:r($),"onUpdate:modelValue":e[20]||(e[20]=l=>b($)?$.value=l:null)},null,8,["modelValue"])]),_:1})])])}}});export{Ge as default};
